openapi: 3.0.3
info:
  title: Edusm User & Admin Management API
  version: 1.0.0
  description: API for creating users/admins, login, and role-based validation with token and superadmin_email.

servers:
  - url: https://next-js-online-learning-app.vercel.app/api
    description: Production server
  - url: http://localhost:3000/api
    description: Local development server

paths:
  /master/class:
    get:
      summary: Get all classes
      operationId: getClasses
      tags:
        - Master - Class
      responses:
        '200':
          description: List of all classes
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    class_name:
                      type: string
        '500':
          description: Server error while fetching classes
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    post:
      summary: Add a new class
      operationId: addMasterClass
      tags:
        - Master - Class
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - class_name
              properties:
                class_name:
                  type: string
      responses:
        '200':
          description: Class added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  insertId:
                    type: integer
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error adding class
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    put:
      summary: Update an existing class
      operationId: updateMasterClass
      tags:
        - Master - Class
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
                - class_name
              properties:
                id:
                  type: integer
                class_name:
                  type: string
      responses:
        '200':
          description: Class updated successfully
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error updating class
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    delete:
      summary: Delete a class
      operationId: deleteMasterClass
      tags:
        - Master - Class
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
      responses:
        '200':
          description: Class deleted successfully
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error deleting class
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

  /master/subject:
    get:
      summary: Get all subjects
      operationId: getMasterSubjects
      tags:
        - Master - Subject
      responses:
        '200':
          description: List of all subjects
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    subject_name:
                      type: string
        '500':
          description: Server error while fetching subjects
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    post:
      summary: Add a new subject
      operationId: addMasterSubject
      tags:
        - Master - Subject
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subject_name
              properties:
                subject_name:
                  type: string
      responses:
        '200':
          description: Subject added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  insertId:
                    type: integer
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error adding subject
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    put:
      summary: Update an existing subject
      operationId: updateMasterSubject
      tags:
        - Master - Subject
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
                - subject_name
              properties:
                id:
                  type: integer
                subject_name:
                  type: string
      responses:
        '200':
          description: Subject updated successfully
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error updating subject
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    delete:
      summary: Delete a subject
      operationId: deleteMasterSubject
      tags:
        - Master - Subject
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
      responses:
        '200':
          description: Subject deleted successfully
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error deleting subject
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

  /master/price:
    get:
      summary: Get all pricing plans
      operationId: getPricingPlans
      tags:
        - Master - Price
      responses:
        '200':
          description: List of pricing plans
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    pricing_id:
                      type: integer
                    plan_name:
                      type: string
                    price:
                      type: number
                    duration:
                      type: integer
        '500':
          description: Error fetching data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    post:
      summary: Add a new pricing plan
      operationId: addPricingPlan
      tags:
        - Master - Price
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - plan_name
                - price
                - duration
              properties:
                plan_name:
                  type: string
                price:
                  type: number
                duration:
                  type: integer
      responses:
        '200':
          description: Pricing plan added
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  insertId:
                    type: integer
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error adding pricing plan
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    put:
      summary: Update an existing pricing plan
      operationId: updatePricingPlan
      tags:
        - Master - Price
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - pricing_id
                - plan_name
                - price
                - duration
              properties:
                pricing_id:
                  type: integer
                plan_name:
                  type: string
                price:
                  type: number
                duration:
                  type: integer
      responses:
        '200':
          description: Pricing plan updated
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error updating pricing plan
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

    delete:
      summary: Delete a pricing plan
      operationId: deletePricingPlan
      tags:
        - Master - Price
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - pricing_id
              properties:
                pricing_id:
                  type: integer
      responses:
        '200':
          description: Pricing plan deleted
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Error deleting pricing plan
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  details:
                    type: string

  /admin/create:
    get:
      summary: Get all users
      operationId: GetCreateUser
      tags:
        - Admin - User Management
      description: Fetches a list of all users.
      responses:
        '200':
          description: Successfully fetched users
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Users fetched successfully"
                  users:
                    type: array
                    items:
                      type: object
                      properties:
                        user_id:
                          type: integer
                          example: 1
                        email:
                          type: string
                          example: "user@example.com"
                        role:
                          type: string
                          example: "user"
                        active_status:
                          type: boolean
                          example: true
        '500':
          description: Failed to fetch users
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Failed to fetch users"
                  details:
                    type: string
                    example: "Database connection error"

    post:
      summary: Create a new user or admin
      operationId: PostCreateUser
      tags:
        - Admin - User Management
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
                role:
                  type: string
                token:
                  type: string
                  description: Required if superadmin_email is present
                superadmin_email:
                  type: string
              required:
                - email
                - password
      responses:
        '200':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  token:
                    type: string
        '400':
          description: Validation error (missing fields)
        '403':
          description: Unauthorized (invalid token or superadmin_email)
        '409':
          description: Conflict (email already exists)

    put:
      summary: Update user details
      operationId: UpdatePutUser
      tags:
        - Admin - User Management
      description: Updates the email, password, role, or active status of a specific user.
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: integer
            example: 1
          description: The ID of the user to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "updateduser@example.com"
                password:
                  type: string
                  example: "newpassword"
                role:
                  type: string
                  example: "admin"
                active_status:
                  type: boolean
                  example: true
                token:
                  type: string
                  description: "Token for superadmin verification"
                  example: "superadmintoken"
                superadmin_email:
                  type: string
                  description: "Email of the superadmin"
                  example: "superadmin@example.com"
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "User updated successfully"
        '400':
          description: Missing required fields or no fields to update
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Email and password are required"
        '403':
          description: Invalid token or superadmin email
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Invalid or expired token for superadmin"
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "User not found"
        '500':
          description: Failed to update user
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Failed to update user"
                  details:
                    type: string
                    example: "Database query error"

  /admin/login:
    post:
      summary: Login admin with email and password
      tags:
        - Admin - User Management
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
                - email
                - password
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  role:
                    type: string
                  email:
                    type: string
        '401':
          description: Invalid credentials
        '404':
          description: User not found

  /admin/boards:
    get:
      summary: Get all education boards
      tags:
        - Admin - Boards
      responses:
        '200':
          description: List of boards
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    board_id:
                      type: integer
                    board_name:
                      type: string
                    image:
                      type: string
                    linkTo:
                      type: string

    post:
      summary: Create a new education board (superadmin token required)
      tags:
        - Admin - Boards
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                board_name:
                  type: string
                image:
                  type: string
                linkTo:
                  type: string
                token:
                  type: string
              required:
                - board_name
                - token
      responses:
        '200':
          description: Board created
        '403':
          description: Invalid superadmin token
        '400':
          description: Missing fields

    put:
      summary: Update an education board (superadmin token required)
      tags:
        - Admin - Boards
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                board_id:
                  type: integer
                board_name:
                  type: string
                image:
                  type: string
                linkTo:
                  type: string
                token:
                  type: string
              required:
                - board_id
                - token
      responses:
        '200':
          description: Board updated
        '403':
          description: Invalid token or unauthorized
        '400':
          description: Missing fields

    delete:
      summary: Delete a board by ID (superadmin token required)
      tags:
        - Admin - Boards
      parameters:
        - in: query
          name: board_id
          schema:
            type: integer
          required: true
        - in: query
          name: token
          schema:
            type: string
          required: true
      responses:
        '200':
          description: Board deleted
        '403':
          description: Invalid token
        '400':
          description: Missing board_id or token

  /admin/classes:
    get:
      summary: Fetch all classes by Board ID
      tags:
        - Admin - Class
      parameters:
        - name: board_id
          in: query
          required: true
          description: The board ID to fetch associated classes.
          schema:
            type: string
      responses:
        '200':
          description: List of classes by board ID
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    class_id:
                      type: integer
                    class_name:
                      type: string
                    board_id:
                      type: string
        '400':
          description: Invalid or missing board_id parameter
        '500':
          description: Internal server error

    post:
      summary: Add a new class
      tags:
        - Admin - Class
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                class_name:
                  type: string
                  description: Name of the class
                board_id:
                  type: string
                  description: ID of the board
              required:
                - class_name
                - board_id
      responses:
        '200':
          description: Class added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  id:
                    type: integer
        '401':
          description: Unauthorized (Superadmin token required)
        '500':
          description: Internal server error

    put:
      summary: Update an existing class
      tags:
        - Admin - Class
      parameters:
        - name: class_id
          in: path
          required: true
          description: The ID of the class to update.
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                class_name:
                  type: string
                  description: Updated name of the class
              required:
                - class_name
      responses:
        '200':
          description: Class updated successfully
        '400':
          description: Missing or invalid class_id parameter
        '401':
          description: Unauthorized (Superadmin token required)
        '404':
          description: Class not found
        '500':
          description: Internal server error

    delete:
      summary: Delete a class
      tags:
        - Admin - Class
      parameters:
        - name: class_id
          in: path
          required: true
          description: The ID of the class to delete.
          schema:
            type: integer
      responses:
        '200':
          description: Class deleted successfully
        '400':
          description: Invalid or missing class_id parameter
        '401':
          description: Unauthorized (Superadmin token required)
        '500':
          description: Internal server error

  /admin/subjects:
    get:
      summary: Get all subjects by class_id
      tags:
        - Admin - Subject
      parameters:
        - name: class_id
          in: query
          required: true
          schema:
            type: string
          description: The class ID to fetch subjects for
      responses:
        '200':
          description: A list of subjects
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '500':
          description: Error fetching data

    post:
      summary: Add a new subject
      tags:
        - Admin - Subject
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - class_id
                - subject_name
              properties:
                class_id:
                  type: string
                subject_name:
                  type: string
      responses:
        '200':
          description: Subject added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  id:
                    type: integer
        '401':
          description: Unauthorized
        '500':
          description: Error adding subject

    put:
      summary: Update a subject
      tags:
        - Admin - Subject
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subject_id
              properties:
                subject_id:
                  type: integer
                subject_name:
                  type: string
      responses:
        '200':
          description: Subject updated successfully
        '400':
          description: Missing subject_id
        '401':
          description: Unauthorized
        '404':
          description: Subject not found
        '500':
          description: Error updating subject

    delete:
      summary: Delete a subject
      tags:
        - Admin - Subject
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subject_id
              properties:
                subject_id:
                  type: integer
      responses:
        '200':
          description: Subject deleted successfully
        '401':
          description: Unauthorized
        '500':
          description: Error deleting subject

  /admin/chapters:
    get:
      summary: Get all chapters by subject_id
      tags:
        - Admin - Chapter
      parameters:
        - name: subject_id
          in: query
          required: true
          schema:
            type: string
          description: The subject ID to fetch chapters for
      responses:
        '200':
          description: A list of chapters
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '500':
          description: Error fetching data

    post:
      summary: Add a new chapter
      tags:
        - Admin - Chapter
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subject_id
                - chapter_name
              properties:
                subject_id:
                  type: string
                chapter_name:
                  type: string
                summary:
                  type: string
                video_url:
                  type: string
                pdf:
                  type: string
      responses:
        '200':
          description: Chapter added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  id:
                    type: integer
        '401':
          description: Unauthorized
        '500':
          description: Error adding chapter

    put:
      summary: Update a chapter
      tags:
        - Admin - Chapter
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - chapter_id
              properties:
                chapter_id:
                  type: integer
                chapter_name:
                  type: string
                summary:
                  type: string
                video_url:
                  type: string
                pdf:
                  type: string
      responses:
        '200':
          description: Chapter updated successfully
        '400':
          description: Missing chapter_id
        '401':
          description: Unauthorized
        '404':
          description: Chapter not found
        '500':
          description: Error updating chapter

    delete:
      summary: Delete a chapter
      tags:
        - Admin - Chapter
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - chapter_id
              properties:
                chapter_id:
                  type: integer
      responses:
        '200':
          description: Chapter deleted successfully
        '401':
          description: Unauthorized
        '500':
          description: Error deleting chapter

  /buy/chapter:
    post:
      summary: Add or update or deactivate chapter
      operationId: addOrUpdateDeactiveChapter
      tags:
        - Admin - Buy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - chapter_id
                - subject_id
                - user_id
                - purchase_date
                - validity
                - token
                - email
                - user_type
                - task_type
              properties:
                chapter_id:
                  type: integer
                  example: 1
                subject_id:
                  type: integer
                  example: 1
                user_id:
                  type: string
                  example: "user@example.com"
                purchase_date:
                  type: string
                  format: date
                  example: "2025-04-21 14:19:20"
                validity:
                  type: integer
                  example: 180
                token:
                  type: string
                  example: "abc123securetoken"
                email:
                  type: string
                  format: email
                  example: "user@example.com"
                user_type:
                  type: string
                  example: "super_admin"
                task_type:
                  type: string
                  example: ""
      responses:
        '200':
          description: Chapter purchase updated successfully
        '409':
          description: Chapter added successfully
        '400':
          description: Invalid user input
        '403':
          description: Token verification failed
        '500':
          description: Server error

  /buy/subject:
    post:
      summary: Add or update or deactivate Subject
      operationId: addOrUpdateDeactiveSubject
      tags:
        - Admin - Buy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subject_id
                - class_id
                - user_id
                - purchase_date
                - validity
                - token
                - email
                - user_type
                - task_type
              properties:
                subject_id:
                  type: integer
                  example: 1
                class_id:
                  type: integer
                  example: 1
                user_id:
                  type: string
                  example: "user@example.com"
                purchase_date:
                  type: string
                  format: date
                  example: "2025-04-21 14:19:20"
                validity:
                  type: integer
                  example: 180
                token:
                  type: string
                  example: "abc123securetoken"
                email:
                  type: string
                  format: email
                  example: "user@example.com"
                user_type:
                  type: string
                  example: "super_admin"
                task_type:
                  type: string
                  example: ""
      responses:
        '200':
          description: Subject updated successfully
        '409':
          description: Subject added successfully
        '400':
          description: Invalid user input
        '403':
          description: Token verification failed
        '500':
          description: Server error

  /buy/class:
    post:
      summary: Add or update or deactivate Class
      operationId: addOrUpdateDeactiveClass
      tags:
        - Admin - Buy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - class_id
                - user_id
                - purchase_date
                - validity
                - token
                - email
                - user_type
                - task_type
              properties:
                class_id:
                  type: integer
                  example: 1
                user_id:
                  type: string
                  example: "user@example.com"
                purchase_date:
                  type: string
                  format: date
                  example: "2025-04-21 14:19:20"
                validity:
                  type: integer
                  example: 180
                token:
                  type: string
                  example: "abc123securetoken"
                email:
                  type: string
                  format: email
                  example: "user@example.com"
                user_type:
                  type: string
                  example: "super_admin"
                task_type:
                  type: string
                  example: ""
      responses:
        '200':
          description: Subject updated successfully
        '409':
          description: Subject added successfully
        '400':
          description: Invalid user input
        '403':
          description: Token verification failed
        '500':
          description: Server error

  /user/create:
    post:
      summary: Create user
      operationId: CreateUser
      description: Create a user with email, password, and role.
      tags:
        - User 
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - role
              properties:
                email:
                  type: string
                  format: email
                  example: "ps@gmail.com"
                password:
                  type: string
                  example: 123
                role:
                  type: string
                  enum: [user, sub_admin]
                  example: user
      responses:
        '200':
          description: User Created successful
        '400':
          description: Missing email or password
        '401':
          description: Invalid credentials
        '500':
          description: Internal server error

  /user/login:
    post:
      summary: Login user or sub_admin
      operationId: LoginUser
      description: Authenticates a user with email, password, and role.
      tags:
        - User 
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - role
              properties:
                email:
                  type: string
                  format: email
                  example: "ps@gmail.com"
                password:
                  type: string
                  example: 123
                role:
                  type: string
                  enum: [user, sub_admin]
                  example: user
      responses:
        '200':
          description: User login successful
        '400':
          description: Missing email or password
        '401':
          description: Invalid credentials
        '500':
          description: Internal server error

  /user/buy/chapter:
    post:
      summary: chapter purchase
      tags:
        - Purchase
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - chapter_id
                - subject_id
                - user_id
                - purchase_date
                - validity
                - token
                - email
                - user_type
              properties:
                chapter_id:
                  type: integer
                  example: 1
                subject_id:
                  type: integer
                  example: 2
                user_id:
                  type: integer
                  example: 10
                purchase_date:
                  type: string
                  format: date
                  example: "2025-04-22"
                validity:
                  type: integer
                  example: 30
                token:
                  type: string
                  example: "superadmin_token_123"
                email:
                  type: string
                  format: email
                  example: "admin@example.com"
                user_type:
                  type: string
                  example: "superadmin"
                task_type:
                  type: string
                  enum: [update, null]
                  example: "update"
      responses:
        '200':
          description: Chapter updated successfully
        '400':
          description: Bad request or already purchased
        '403':
          description: Invalid or expired token
        '409':
          description: Chapter added successfully
        '500':
          description: Server error

  /user/buy/subject:
    post:
      summary: subject purchase
      tags:
        - Purchase
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subject_id
                - class_id
                - user_id
                - purchase_date
                - validity
                - token
                - email
                - user_type
              properties:
                subject_id:
                  type: integer
                  example: 5
                class_id:
                  type: integer
                  example: 10
                user_id:
                  type: integer
                  example: 3
                purchase_date:
                  type: string
                  format: date
                  example: "2025-04-22"
                validity:
                  type: integer
                  example: 30
                token:
                  type: string
                  example: "superadmin_token_123"
                email:
                  type: string
                  format: email
                  example: "admin@example.com"
                user_type:
                  type: string
                  example: "superadmin"
                task_type:
                  type: string
                  enum: [update, null]
                  example: "update"
      responses:
        '200':
          description: Subject updated successfully
        '400':
          description: Bad request or already purchased
        '403':
          description: Invalid or expired token
        '409':
          description: Subject added successfully
        '500':
          description: Server error

  /user/buy/class:
    post:
      summary: class purchase
      tags:
        - Purchase
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - class_id
                - user_id
                - purchase_date
                - validity
                - token
                - email
                - user_type
              properties:
                class_id:
                  type: integer
                  example: 101
                user_id:
                  type: integer
                  example: 10
                purchase_date:
                  type: string
                  format: date
                  example: "2025-04-22"
                validity:
                  type: integer
                  example: 30
                token:
                  type: string
                  example: "superadmin_token_123"
                email:
                  type: string
                  format: email
                  example: "admin@example.com"
                user_type:
                  type: string
                  example: "superadmin"
                task_type:
                  type: string
                  enum: [update, null]
                  example: "update"
      responses:
        '200':
          description: Class updated successfully
        '400':
          description: Bad request or already purchased
        '403':
          description: Invalid or expired token
        '409':
          description: Class added successfully
        '500':
          description: Server error

  /user/fetch/questionAns:
    get:
      summary: Fetch all questions and answers for a chapter by chapter ID
      tags:
        - Fetch
      parameters:
        - name: chapter_id
          in: query
          required: true
          schema:
            type: integer
            example: 101
          description: The ID of the chapter to fetch questions and answers for
      responses:
        '200':
          description: Successfully fetched questions and answers for the chapter
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    question_id:
                      type: integer
                      example: 1
                    question:
                      type: string
                      example: "What is the capital of France?"
                    option_a:
                      type: string
                      example: "Berlin"
                    option_b:
                      type: string
                      example: "Madrid"
                    option_c:
                      type: string
                      example: "Paris"
                    option_d:
                      type: string
                      example: "Rome"
                    correct_option:
                      type: string
                      example: "option_c"
        '400':
          description: Bad Request (Invalid `chapter_id` or missing parameter)
        '500':
          description: Server error

  /user/fetch/chapter:
    post:
      summary: Fetch chapter details and assessments
      tags:
        - Fetch
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - chapter_id
                - subject_id
                - user_id
                - token
                - email
              properties:
                chapter_id:
                  type: integer
                  example: 101
                subject_id:
                  type: integer
                  example: 10
                user_id:
                  type: integer
                  example: 5
                token:
                  type: string
                  example: "superadmin_token_123"
                email:
                  type: string
                  format: email
                  example: "admin@example.com"
      responses:
        '200':
          description: Successfully fetched chapter and assessments
        '400':
          description: Invalid user (missing token or email)
        '403':
          description: Invalid or expired token
        '404':
          description: Chapter not found
        '500':
          description: Server error

  /user/fetch/subject:
    post:
      summary: Fetch subject details for a user
      tags:
        - Fetch
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - subject_id
                - user_id
                - token
                - email
              properties:
                subject_id:
                  type: integer
                  example: 10
                user_id:
                  type: integer
                  example: 5
                token:
                  type: string
                  example: "superadmin_token_123"
                email:
                  type: string
                  format: email
                  example: "admin@example.com"
      responses:
        '200':
          description: Successfully fetched subject details
        '400':
          description: Invalid user (missing token or email)
        '403':
          description: Invalid or expired token
        '404':
          description: Subject not found
        '500':
          description: Server error

  /user/fetch/class:
    post:
      summary: Fetch class details for a user
      tags:
        - Fetch
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - class_id
                - user_id
                - token
                - email
              properties:
                class_id:
                  type: integer
                  example: 101
                user_id:
                  type: integer
                  example: 5
                token:
                  type: string
                  example: "superadmin_token_123"
                email:
                  type: string
                  format: email
                  example: "admin@example.com"
      responses:
        '200':
          description: Successfully fetched class details
        '400':
          description: Invalid user (missing token or email)
        '403':
          description: Invalid or expired token
        '404':
          description: Class not found
        '500':
          description: Server error

  /blog:
    get:
      summary: Fetch blogs
      description: Fetch all blogs, a single blog by `blog_id`, limited blogs, or blogs by `cat_id`.
      operationId: getAllBlog
      tags:
        - Blog
      parameters:
        - in: query
          name: blog_id
          schema:
            type: string
          required: false
          description: ID of the blog to fetch a specific blog
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
          required: false
          description: Limit the number of blogs returned
        - in: query
          name: cat_id
          schema:
            type: string
          required: false
          description: Filter blogs by category ID
      responses:
        '200':
          description: Blogs fetched successfully
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: '#/components/schemas/Blog'
                  - $ref: '#/components/schemas/Blog'
        '404':
          description: Blog(s) not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        components:
          schemas:
            Blog:
              type: object
              properties:
                blog_id:
                  type: integer
                cat_id:
                  type: integer
                title:
                  type: string
                content:
                  type: string
                created_at:
                  type: string
                  format: date-time
            Error:
              type: object
              properties:
                error:
                  type: string
                details:
                  type: string
    
    post:
      summary: Add a new blog
      operationId: addBlog
      tags:
        - Blog
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                cat_id:
                  type: integer
                  example: 2
                title:
                  type: string
                  example: "New Blog Post"
                slug:
                  type: string
                  example: "new-blog-post"
                description1:
                  type: string
                  example: "Main content of the blog."
                description2:
                  type: string
                  example: "Additional content of the blog."
                create_date:
                  type: string
                  format: date
                  example: "2023-04-21"
                image1:
                  type: string
                  format: binary
      responses:
        '201':
          description: Blog added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Blog added"
                  id:
                    type: integer
                    example: 1
        '400':
          description: Invalid input data
        '500':
          description: Internal server error
    
    put:
      summary: Update a blog
      operationId: updateBlog
      tags:
        - Blog
      parameters:
        - name: blog_id
          in: path
          required: true
          schema:
            type: integer
          description: The ID of the blog to update
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                cat_id:
                  type: integer
                  example: 2
                title:
                  type: string
                  example: "Updated Blog Post"
                slug:
                  type: string
                  example: "updated-blog-post"
                description1:
                  type: string
                  example: "Updated content of the blog."
                description2:
                  type: string
                  example: "Updated additional content of the blog."
                update_date:
                  type: string
                  format: date
                  example: "2023-04-22"
                image1:
                  type: string
                  format: binary
      responses:
        '200':
          description: Blog updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Blog updated successfully"
        '400':
          description: Invalid input data
        '404':
          description: Blog not found
        '500':
          description: Internal server error
    
    delete:
      summary: Delete a blog
      operationId: deleteBlog
      tags:
        - Blog
      parameters:
        - name: blog_id
          in: path
          required: true
          schema:
            type: integer
          description: The ID of the blog to delete
      responses:
        '200':
          description: Blog deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Blog deleted"
        '404':
          description: Blog not found
        '500':
          description: Internal server error

  /blog/category:
    get:
      summary: Fetch all blog categories
      operationId: BlogCategory
      tags:
        - Blog
      responses:
        '200':
          description: A list of blog categories
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    cat_id:
                      type: integer
                    cat_name:
                      type: string
        '500':
          description: Server error

    post:
      summary: Add a new blog category
      operationId: AddBlogCategory
      tags:
        - Blog
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cat_name:
                  type: string
              required:
                - cat_name
      responses:
        '200':
          description: Category added
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  id:
                    type: integer
        '400':
          description: Category already exists
        '500':
          description: Error adding category

    put:
      summary: Update an existing blog category
      operationId: UpdateBlogCategory
      tags:
        - Blog
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cat_id:
                  type: integer
                cat_name:
                  type: string
              required:
                - cat_id
      responses:
        '200':
          description: Category updated successfully
        '400':
          description: Bad request
        '404':
          description: Category not found
        '500':
          description: Error updating category

    delete:
      summary: Delete a blog category
      operationId: DeleteBlogCategory
      tags:
        - Blog
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cat_id:
                  type: integer
              required:
                - cat_id
      responses:
        '200':
          description: Category deleted
        '500':
          description: Error deleting category